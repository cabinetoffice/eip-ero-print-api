id: "http://eip-print/schemas/yaml-schema/v0.1-draft"
title: PrintProviderSchema
description: |
  Print Batch Request, Print Batch and Print Request Response models.
  PrintRequests -> represents the JSON message sent from EROP to the Print Provider for a batch of print requests.
  PrintResponses -> represents a response from the Print Provider to EROP, PrintResponses can contain responses to 0..m batches and 0..m print requests.
type: object
x-internal: false
properties:
  PrintRequests:
    title: PrintRequests
    type: object
    description: |
      Represents a collection of print requests.
      The request contains the batchId which uniquely idenifies the items contained within the 'batch'
      The total number of items contained withing the batch.
      And all of the print requests.
    properties:
      batchId:
        type: string
        maxLength: 50
        description: Batch identifier
      numberOfRequests:
        type: number
        format: double
        description: Number of print requests contained in the batch
      printRequests:
        type: array
        description: Array of all print requests
        items:
          $ref: '#PrintRequest'
    required:
      - batchId
      - numberOfRequests
      - printRequests
  PrintRequest:
    type: object
    description: Represents a single print request
    properties:
      requestId:
        type: string
        format: uuid
        description: The request identifier of the print request
        example: 14ab70e8-bd3b-400f-bd95-246caf9e4810
      issuingAuthority:
        type: string
        maxLength: 255
        description: Issuing authority (LA/ERO/VJB)
        example: Camden Borough Council
      issueDate:
        type: string
        format: date-time
        description: The issue date of the Voter Authority Card
        example: '2022-06-01'
      requestDateTime:
        type: string
        format: date-time
        description: The date time the Voter Authority Certificate was requested
        example: '2022-06-01T12:23:03.000Z'
      cardVersion:
        type: string
        maxLength: 20
        description: Version text if supporting mutiple versions.
      cardFirstname:
        type: string
        maxLength: 255
        description: First name of the Elector
        example: John
      cardMiddlenames:
        type: string
        maxLength: 255
        description: Middle names of the Elector
        example: Malcolm
      cardSurname:
        type: string
        maxLength: 255
        description: Surname of the Elector
        example: Smith
      cardNumber:
        type: string
        maxLength: 20
        minLength: 20
        description: Unique identifier of the Voter Authority Certificate
        example: TBC
      certificateLanguage:
        type: string
        enum:
          - cy
          - en
        default: en
        description: The Voter Authority Certificate language
      deliveryOption:
        type: string
        enum:
          - standard
        description: Future proof in case of fast track
      photo:
        type: string
        format: binary
        description: Path to image in zip file
      deliveryName:
        type: string
        maxLength: 255
        description: Name to be printed with delivery address
      deliveryAddress:
        $ref: '#Address'
      eroName:
        type: string
      eroPhoneNumber:
        type: string
      eroEmailAddress:
        type: string
      eroWebsite:
        type: string
      eroAddress:
        $ref: '#Address'
    required:
      - requestId
      - issuingAuthority
      - issueDate
      - requestDateTime
      - cardFirstname
      - cardMiddlenames
      - cardSurname
      - cardNumber
      - certificateLanguage
      - deliveryOption
      - photo
      - deliveryName
      - deliveryAddress
      - eroName
      - eroPhoneNumber
      - eroEmailAddress
      - eroWebsite
      - eroAddress
  PrintResponses:
    type: object
    description: 'A response from the print provider to EROP, can contain either batch or print responses, or both.'
    properties:
      BatchResponses:
        type: array
        description: Array of all batch responses.
        items:
          $ref: '#BatchResponse'
      PrintResponses:
        type: array
        description: Array of all print responses.
        items:
          $ref: '#BPrinthResponse'
  BatchResponse:
    type: object
    description: Represents the response from the print provider in response to recieving a batch file from EROP
    properties:
      batchId:
        type: string
        example: 1000-2000
      status:
        type: string
        enum:
          - SUCCESS
          - FAILED
      timestamp:
        type: string
        format: date-time
      message:
        type: string
        maxLength: 255
        description: Error description
    required:
      - batchId
      - status
      - timestamp
  PrintResponse:
    type: object
    description: 'Represents a print response, status update for a single print request'
    properties:
      requestId:
        type: string
        format: uuid
        description: The request identifier of the print request
        example: 14ab70e8-bd3b-400f-bd95-246caf9e4810
      timestamp:
        type: string
        format: date-time
        description: The date time the Voter Authority Certificate print request was updated to this status.
        example: '2022-06-01T14:23:03.000Z'
      statusStep:
        type: string
        description: Status update of print request
        enum:
          - RECEIVED
          - PROCESSED
          - IN-PRODUCTION
          - DISPATCHED
      status:
        type: string
        enum:
          - SUCCESS
          - FAILED
      message:
        type: string
        maxLength: 255
        description: Failure message
    required:
      - requestId
      - timestamp
      - statusStep
      - status
  Address:
    title: Address
    type: object
    x-examples:
      Minimum data:
        street: Street 1
        postcode: PC1 2FB
      Normal Address:
        street: East Lodge
        property: Balruddery
        locality: Invergowrie
        town: Dundee
        area: Angus
        postcode: DD25LF
        uprn: '117095813'
    description: Address format used throughout gov.uk voter services.
    properties:
      street:
        type: string
        maxLength: 255
      property:
        type: string
        maxLength: 255
      locality:
        type: string
        maxLength: 255
      town:
        type: string
        maxLength: 255
      area:
        type: string
        maxLength: 255
      postcode:
        type: string
        maxLength: 10
    required:
      - street
      - postcode
