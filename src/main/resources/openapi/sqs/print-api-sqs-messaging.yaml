openapi: 3.0.0
info:
  title: Print API SQS Message Types
  version: '1.0.0'
  description: |-
    Print API SQS Message Types
    
    Whilst this is an openAPI spec, it does not imply being used to define REST APIs, nor is it intended to.
    
    The `paths` elements are being used to document (at a high level) the SQS queues and the request bodies that are expected
    to be published to them. **There is no intent to generate or implement SQS queues or listener classes from this document.**
    
    The `paths` element is only being used in order to maintain the structure of the openApi spec, as `paths` are required 
    elements.
#
# --------------------------------------------------------------------------------
#

paths:
  #
  # --------------------------------------------------------------------------------
  # SQS Queues start here
  # --------------------------------------------------------------------------------
  #
  '/send-application-to-print':
    post:
      tags:
        - SQS Queues
      requestBody:
        $ref: '#/components/requestBodies/SendApplicationToPrintMessage'
      responses:
        '204':
          description: No response content.

components:
  #
  # Schema and Enum Definitions
  # --------------------------------------------------------------------------------
  schemas:

    SendApplicationToPrintMessage:
      description: The SQS message for sending an application to print.
      type: object
      properties:
        sourceReference:
          type: string
          description: Reference in the source application that this print request relates to
        applicationReference:
          type: string
          description: The application reference as known by the citizen. Not guaranteed to be unique.
        sourceType:
          $ref: '#/components/schemas/SourceType'
        gssCode:
          type: string
          minLength: 9
          maxLength: 9
          description: GSS code of the ERO responsible for sending the message
        issuingAuthority:
          type: string
          maxLength: 255
          description: Issuing authority (LA/ERO/VJB)
          example: Camden Borough Council
        requestDateTime:
          type: string
          format: date-time
          description: The date time the Voter Authority Certificate print request was requested
          example: '2022-06-01T12:23:03.000Z'
        firstName:
          type: string
          maxLength: 255
          description: First name of the Elector
          example: John
        middleNames:
          type: string
          maxLength: 255
          description: Middle names of the Elector
          example: Malcolm
        surname:
          type: string
          maxLength: 255
          description: Surname of the Elector
          example: Smith
        certificateLanguage:
          $ref: '#/components/schemas/CertificateLanguage'
        photoLocation:
          type: string
          description: The location of the Elector's photo. Typically an S3 ARN
          maxLength: 1024
        delivery:
          $ref: '#/components/schemas/CertificateDelivery'
        eroEnglish:
          $ref: '#/components/schemas/ElectoralRegistrationOffice'
        eroWelsh:
          $ref: '#/components/schemas/ElectoralRegistrationOffice'
      required:
        - sourceReference
        - sourceType
        - applicationReference
        - issuingAuthority
        - requestDateTime
        - firstName
        - middleNames
        - surname
        - certificateLanguage
        - photoLocation
        - delivery
        - eroEnglish

    SourceType:
      title: SourceType
      description: An enumeration of sources for this print request
      type: string
      enum:
        - voter-card

    CertificateLanguage:
      title: CertificateLanguage
      description: The Voter Authority Certificate language
      type: string
      enum:
        - cy
        - en
      default: en

    CertificateDelivery:
      title: CertificateDelivery
      description: Object describing how and where the Voter Authority Certificate should be delivered
      type: object
      properties:
        deliveryClass:
          $ref: '#/components/schemas/DeliveryClass'
        addressee:
          type: string
          maxLength: 255
          description: The addressee to be printed in addition to the delivery address
        address:
          $ref: '#/components/schemas/Address'
      required:
        - deliveryOption
        - addressee
        - address

    DeliveryClass:
      title: DeliveryClass
      description: The delivery class for the Voter Authority Certificate
      type: string
      enum:
        - standard

    Address:
      title: Address
      description: Address format used throughout gov.uk voter services.
      type: object
      x-examples:
        Minimum data:
          street: Street 1
          postcode: PC1 2FB
        Normal Address:
          street: East Lodge
          property: Balruddery
          locality: Invergowrie
          town: Dundee
          area: Angus
          postcode: DD25LF
          uprn: '117095813'
      properties:
        street:
          type: string
          maxLength: 255
        property:
          type: string
          maxLength: 255
        locality:
          type: string
          maxLength: 255
        town:
          type: string
          maxLength: 255
        area:
          type: string
          maxLength: 255
        postcode:
          type: string
          maxLength: 10
        uprn:
          type: string
          description: Unique Property Reference Number consisting of up to 12 digits in length
          pattern: '^\d{1,12}$'
      required:
        - street
        - postcode

    ElectoralRegistrationOffice:
      title: ElectoralRegistrationOffice
      description: Electoral Registration Office Details
      type: object
      properties:
        name:
          type: string
          maxLength: 255
          description: ERO name
        phoneNumber:
          type: string
          maxLength: 20
          description: ERO contact phone number
        emailAddress:
          type: string
          maxLength: 255
          format: email
          description: ERO contact email address
        website:
          type: string
          maxLength: 1024
          description: The ERO website url
        address:
          $ref: '#/components/schemas/Address'
      required:
        - name
        - phoneNumber
        - emailAddress
        - website
        - address

  #
  # Response Body Definitions
  # --------------------------------------------------------------------------------
  responses: { }

  #
  # Request Body Definitions
  # --------------------------------------------------------------------------------
  requestBodies:
    SendApplicationToPrintMessage:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SendApplicationToPrintMessage'
